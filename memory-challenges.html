<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Memory Game</title>
  <style>
    body {
  background-color: #121212;
  color: #f0f0f0;
  font-family: 'Segoe UI', sans-serif;
  margin: 0;
  padding: 20px;
}

.container {
  max-width: 900px;
  margin: auto;
  background: #1e1e1e;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.6);
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

button {
  background: #00bfa6;
  color: white;
  border: none;
  padding: 10px 14px;
  border-radius: 8px;
  cursor: pointer;
}

#gameBoard {
  display: grid;
  gap: 12px;
  justify-content: center;
}

.card {
  width: 80px;
  height: 80px;
  background: #333;
  color: transparent;
  font-size: 2rem;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 10px;
  cursor: pointer;
  user-select: none;
  transition: background 0.3s, color 0.3s;
}

.card.flipped {
  background: #00bfa6;
  color: white;
}

.info {
  text-align: center;
  margin-top: 20px;
  font-size: 1.1rem;
}

  </style>
</head>
<body>
  <div class="container">
    <header>
      <button onclick="goBack()">‚¨Ö Back</button>
      <h1>üß† Memory Game</h1>
      <select id="levelSelect" onchange="initGame()">
        <option value="easy">Easy</option>
        <option value="medium" selected>Medium</option>
        <option value="hard">Hard</option>
      </select>
    </header>

    <div id="gameBoard"></div>
    <div class="info">
      ‚è±Ô∏è Time: <span id="timer">0</span>s |
      üéØ Matches: <span id="matches">0</span> |
      üß© XP: <span id="xp">0</span>
    </div>
  </div>

  <script>
    let symbols = ["üê∂", "üê±", "üê≠", "ü¶Å", "üê∏", "üêß", "üêº", "üêµ", "üê§", "ü¶Ñ", "üê¢", "üêô", "üêù", "ü¶ã", "ü¶ï", "ü¶ç"];
let firstCard = null;
let secondCard = null;
let lockBoard = false;
let matches = 0;
let xp = 0;
let timer = 0;
let interval;

function goBack() {
  window.location.href = "challenge.html";
}

function startTimer() {
  clearInterval(interval);
  timer = 0;
  interval = setInterval(() => {
    timer++;
    document.getElementById("timer").innerText = timer;
  }, 1000);
}

function shuffle(array) {
  return array.sort(() => 0.5 - Math.random());
}

function initGame() {
  const level = document.getElementById("levelSelect").value;
  let gridSize;

  if (level === "easy") gridSize = 6;
  else if (level === "medium") gridSize = 16;
  else gridSize = 36;

  const gameSymbols = shuffle(symbols).slice(0, gridSize / 2);
  const allSymbols = shuffle([...gameSymbols, ...gameSymbols]);

  const board = document.getElementById("gameBoard");
  board.innerHTML = "";
  board.style.gridTemplateColumns = `repeat(${Math.sqrt(gridSize)}, 1fr)`;

  matches = 0;
  xp = 0;
  document.getElementById("matches").innerText = matches;
  document.getElementById("xp").innerText = xp;
  document.getElementById("timer").innerText = 0;

  allSymbols.forEach((symbol) => {
    const card = document.createElement("div");
    card.classList.add("card");
    card.innerText = symbol;
    card.dataset.symbol = symbol;
    card.addEventListener("click", flipCard);
    board.appendChild(card);
  });

  startTimer();
}

function flipCard() {
  if (lockBoard || this.classList.contains("flipped")) return;

  this.classList.add("flipped");

  if (!firstCard) {
    firstCard = this;
    return;
  }

  secondCard = this;
  lockBoard = true;

  if (firstCard.dataset.symbol === secondCard.dataset.symbol) {
    matches++;
    xp += 10;
    document.getElementById("matches").innerText = matches;
    document.getElementById("xp").innerText = xp;

    firstCard = null;
    secondCard = null;
    lockBoard = false;
    const totalPairs = document.querySelectorAll(".card").length / 2;
    if (matches === totalPairs) {
      clearInterval(interval); 
      alert(`üéâ You finished in ${timer}s and earned ${xp} XP!`);
      updateLeaderboard("Memory Game", xp);
    }

  } else {
    setTimeout(() => {
      firstCard.classList.remove("flipped");
      secondCard.classList.remove("flipped");
      firstCard = null;
      secondCard = null;
      lockBoard = false;
    }, 700);
  }
}


document.addEventListener("DOMContentLoaded", initGame);

function updateLeaderboard(game, xpEarned) {
  let leaderboard = JSON.parse(localStorage.getItem("miniChallengeLeaderboard")) || [];
  const username = localStorage.getItem("username") || "You";
  const existing = leaderboard.find(e => e.name === username);
  if (existing) {
    existing.xp += xpEarned;
  } else {
    leaderboard.push({ name: username, xp: xpEarned });
  }
  leaderboard.sort((a, b) => b.xp - a.xp);
  localStorage.setItem("miniChallengeLeaderboard", JSON.stringify(leaderboard));
}


  </script>
</body>
</html>
